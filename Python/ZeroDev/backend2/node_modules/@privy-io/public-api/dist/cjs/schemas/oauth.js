"use strict";var e=require("zod"),r=require("@privy-io/api-base"),t=require("../constants/oauth.js"),i=require("./account-transfer.js"),o=require("./core.js"),s=require("./user.js");require("bs58"),require("libphonenumber-js/max"),require("viem"),require("./smart-wallet-config.js"),require("../constants/smart-wallets.js"),require("./wallet-api/wallets/index.js"),require("./api.js"),require("./transaction.js"),require("./wallet-api/export.js"),require("./wallet-api/wallets/spark/index.js"),require("./wallet-api/wallets/spark/utils.js");const a=e.z.enum(t.SUPPORTED_OAUTH_PROVIDERS,{invalid_type_error:"Please specify a supported provider.",required_error:"Please specify a supported provider."}),n=a.or(e.z.custom((e=>"string"==typeof e&&/^privy:[a-z0-9]{25}$/i.test(e)),{message:"Please specify a supported provider."})),p=e.z.object({authorization_code:e.z.string(),state_code:e.z.string(),code_verifier:e.z.string().min(43).max(128).optional(),code_type:e.z.enum(["raw"]).optional()}).merge(o.AuthenticateMode).catch((()=>{throw new r.UnauthorizedError("Please specify authorization_code and state_code.",r.PrivyErrorCode.INVALID_CREDENTIALS)})),u=e.z.object({redirect_to:e.z.string({required_error:"Please provide a redirect_to value."}),provider:n,token:e.z.string().optional(),state_code:e.z.string().optional(),code_challenge:e.z.string().optional()}),l=e.z.object({authorization_code:e.z.string(),state_code:e.z.string(),code_verifier:e.z.string().min(43).max(128).optional(),code_type:e.z.enum(["raw"]).optional()}),d=e.z.object({subject:e.z.string(),provider:n}),c=e.z.object({url:e.z.string()}),z=s.User.extend({oauth_tokens:s.OAuthTokens.optional()}),g=i.BaseAccountTransferInput.extend({userInfo:e.z.object({subject:e.z.string(),name:e.z.string().optional(),username:e.z.string().optional(),profilePictureUrl:e.z.string().optional(),email:e.z.string().optional().nullable(),vanityName:e.z.string().optional(),meta:e.z.object({providerAppId:e.z.string().optional()}).optional(),embeddedWalletAddresses:e.z.array(e.z.string()).optional(),smartWalletAddresses:e.z.array(e.z.string()).optional()})});exports.SUPPORTED_OAUTH_PROVIDERS=t.SUPPORTED_OAUTH_PROVIDERS,exports.AuthenticateOauthInput=p,exports.ExternalOAuthProvider=a,exports.LinkOAuthInput=l,exports.OAuthInitInput=u,exports.OAuthInitResponse=c,exports.OAuthLinkResponse=z,exports.OAuthProvider=n,exports.OAuthUnlinkInput=d,exports.TransferOAuthInput=g;
